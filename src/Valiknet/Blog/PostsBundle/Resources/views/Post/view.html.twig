{% extends 'ValiknetBlogPostsBundle:Layouts:main.html.twig' %}

{% block title %}
    {{ post.title }}
{% endblock %}

{% block styles %}
    <link href="{{ asset('bundles/valiknetblogposts/style/post/fullpost.css') }}" rel="stylesheet" />
{% endblock %}

{% block content %}
    <div class="webber-article">
        <div class="control-block">
            <a href="{{ path('edit_post', {'slug':post.getSlugPost }) }}">Редагувати</a>
            <a href="{{ path('delete_post', {'id':post.id}) }}" id="delete_post">Видалити</a>
        </div>

        <div class="title">
            <a href="{{ path('view_post', { 'slug':post.getSlugPost }) }}">{{ post.title }}</a>
        </div>
        <div class="info-block">
            <p>
                Дата створення: <b>{{ post.createdAt|date("d.m.Y H:i:s") }}</b><br>
                Дата останнього оновлення: <b>{{ post.updatedAt|date("d.m.Y H:i:s") }}</b><br>
                Створено користувачем: <b>{{ post.author }}</b><br>
                Кількість коментарів під записом: <b>{{ post.comment|length }}</b>
            </p>
        </div>
        <div class="tag-block">
            <p>
                Теги:
                {% for tag in post.tag %}
                    <a href="{{ path('tag_page', {'slug': tag.hashSlug }) }}">#{{ tag.hashTag }}</a>
                {% endfor %}
            </p>

        </div>
        <div class="text">
            <p>{{ post.text }}</p>
        </div>
    </div>
    <div class="comment-article">
        <h3>
            Коментарі:
        </h3>
        <ul id="category_list">
            {% for comment in post.comment %}
                <li>
                    <div class="comment">
                        <div class="info-block">
                            <p>
                                Додано користувачем: <b>{{ comment.author }}</b></br>
                                Дата створення: <b>{{ comment.createdAt|date("d.m.Y H:i:s") }}</b>
                            </p>
                        </div>

                        <div class="text">
                            <p>
                                {{ comment.text }}
                            </p>
                        </div>
                    </div>
                </li>
            {% else %}
                <li>
                    <h3>На даний момент до цього запису не створено ні одного коментаря</h3>
                </li>
            {% endfor %}
        </ul>


        <div>
            <h3>Створення нового коментаря:</h3>
            <form id="comment_add" role="form" action="{{ path("comment_add", {"id" : post.id}) }}" method="POST">
                <div>
                    <label for="author">Ім'я автора:
                    </label>

                    <input type="text" name="author" id="author" required="true"/>
                </div>
                <div>
                    <label for="text">Текст коментаря(максимум 255 символів):</label>

                    <textarea name="text" id="text" maxlength="255" required="true"></textarea>

                    <div id="clear"></div>
                </div>
                <div>
                    <input type="submit" value="Додати коментар">
                </div>
            </form>
        </div>
    </div>

{% endblock %}